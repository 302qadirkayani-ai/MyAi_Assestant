<!DOCTYPE html>
<html lang="ur">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anime 3D Studio - Ø§ÛŒÙ†ÛŒÙ…ÛŒ ØªÚ¾Ø±ÛŒ ÚˆÛŒ Ø§Ø³Ù¹ÙˆÚˆÛŒÙˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
            direction: rtl;
        }
        
        #container {
            width: 100vw;
            height: 100vh;
            display: flex;
        }
        
        /* 3D Viewport */
        #viewport {
            flex: 1;
            position: relative;
            background: #1a1a2e;
        }
        
        canvas {
            display: block;
            width: 100%;
            height: 100%;
        }
        
        /* Control Panel */
        #controls {
            width: 320px;
            background: rgba(0, 0, 0, 0.85);
            color: white;
            padding: 20px;
            overflow-y: auto;
            backdrop-filter: blur(10px);
        }
        
        h1 {
            font-size: 20px;
            margin-bottom: 20px;
            text-align: center;
            color: #ff6b9d;
            text-shadow: 0 0 10px rgba(255, 107, 157, 0.5);
        }
        
        .section {
            margin-bottom: 25px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .section h3 {
            font-size: 14px;
            margin-bottom: 12px;
            color: #ffd93d;
            border-bottom: 1px solid rgba(255, 217, 61, 0.3);
            padding-bottom: 8px;
        }
        
        button {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .color-picker {
            width: 100%;
            height: 40px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px 0;
        }
        
        input[type="range"] {
            width: 100%;
            margin: 10px 0;
        }
        
        label {
            display: block;
            font-size: 12px;
            margin: 8px 0 4px;
            color: #ddd;
        }
        
        #voiceStatus {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: #4ade80;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: bold;
            display: none;
            z-index: 1000;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .recording {
            background: #ef4444 !important;
            color: white !important;
        }
        
        #stats {
            position: fixed;
            bottom: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: #4ade80;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 11px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div id="voiceStatus">ğŸ¤ Ø¢ÙˆØ§Ø² Ø³Ù† Ø±ÛØ§ ÛÙˆÚº...</div>
    <div id="stats">FPS: 60 | Models: 0</div>
    
    <div id="container">
        <div id="viewport"></div>
        
        <div id="controls">
            <h1>ğŸŒ Ø§ÛŒÙ†ÛŒÙ…ÛŒ ØªÚ¾Ø±ÛŒ ÚˆÛŒ Ø§Ø³Ù¹ÙˆÚˆÛŒÙˆ</h1>
            
            <!-- Character Creation -->
            <div class="section">
                <h3>ğŸ‘¤ Ú©Ø±Ø¯Ø§Ø± Ø¨Ù†Ø§Ø¦ÛŒÚº</h3>
                <button onclick="addAnimeCharacter()">Ù†ÛŒØ§ Ø§ÛŒÙ†ÛŒÙ…ÛŒ Ú©Ø±Ø¯Ø§Ø± +</button>
                <button onclick="removeCharacter()">Ú©Ø±Ø¯Ø§Ø± ÛÙ¹Ø§Ø¦ÛŒÚº -</button>
                <label>Ú©Ø±Ø¯Ø§Ø±ÙˆÚº Ú©ÛŒ ØªØ¹Ø¯Ø§Ø¯: <span id="charCount">0</span></label>
            </div>
            
            <!-- Customization -->
            <div class="section">
                <h3>ğŸ¨ ØªØ¨Ø¯ÛŒÙ„ÛŒØ§Úº</h3>
                <label>Ø¨Ø§Ù„ÙˆÚº Ú©Ø§ Ø±Ù†Ú¯:</label>
                <input type="color" class="color-picker" id="hairColor" value="#ff1493" onchange="changeHairColor(this.value)">
                
                <label>Ø¢Ù†Ú©Ú¾ÙˆÚº Ú©Ø§ Ø±Ù†Ú¯:</label>
                <input type="color" class="color-picker" id="eyeColor" value="#4169e1" onchange="changeEyeColor(this.value)">
                
                <label>Ù„Ø¨Ø§Ø³ Ú©Ø§ Ø±Ù†Ú¯:</label>
                <input type="color" class="color-picker" id="clothColor" value="#9370db" onchange="changeClothColor(this.value)">
            </div>
            
            <!-- Animations -->
            <div class="section">
                <h3>ğŸ’ƒ Ø­Ø±Ú©Ø§Øª</h3>
                <button onclick="playAnimation('wave')">ÛØ§ØªÚ¾ ÛÙ„Ø§Ù†Ø§ ğŸ‘‹</button>
                <button onclick="playAnimation('jump')">Ú©ÙˆØ¯Ù†Ø§ â¬†ï¸</button>
                <button onclick="playAnimation('walk')">Ú†Ù„Ù†Ø§ ğŸš¶</button>
                <button onclick="playAnimation('dance')">ÚˆØ§Ù†Ø³ ğŸ’ƒ</button>
                <button onclick="stopAnimation()">Ø±Ú©ÛŒÚº â¸ï¸</button>
            </div>
            
            <!-- Background -->
            <div class="section">
                <h3>ğŸï¸ Ù¾Ø³ Ù…Ù†Ø¸Ø±</h3>
                <button onclick="changeBackground('school')">Ø§Ø³Ú©ÙˆÙ„ ğŸ«</button>
                <button onclick="changeBackground('city')">Ø´ÛØ± ğŸ™ï¸</button>
                <button onclick="changeBackground('home')">Ú¯Ú¾Ø± ğŸ </button>
                <button onclick="changeBackground('park')">Ù¾Ø§Ø±Ú© ğŸŒ³</button>
            </div>
            
            <!-- Voice Control -->
            <div class="section">
                <h3>ğŸ¤ Ø¢ÙˆØ§Ø² Ø³Û’ Ú©Ù†Ù¹Ø±ÙˆÙ„</h3>
                <button id="voiceBtn" onclick="toggleVoiceControl()">Ø¢ÙˆØ§Ø² Ø´Ø±ÙˆØ¹ Ú©Ø±ÛŒÚº</button>
                <small style="color: #888; display: block; margin-top: 10px; line-height: 1.6;">
                    <strong>Ú©ÛÛŒÚº:</strong><br>
                    â€¢ "Ù†ÛŒØ§ Ú©Ø±Ø¯Ø§Ø± Ø¨Ù†Ø§Ø¤"<br>
                    â€¢ "ÚˆØ§Ù†Ø³ Ú©Ø±Ùˆ" / "Ú†Ù„Ùˆ" / "Ú©ÙˆØ¯Ùˆ"<br>
                    â€¢ "Ø±Ù†Ú¯ Ø¨Ø¯Ù„Ùˆ: Ø³Ø±Ø®/Ù†ÛŒÙ„Ø§/Ú¯Ù„Ø§Ø¨ÛŒ"<br>
                    â€¢ "Ø§Ø³Ú©ÙˆÙ„ Ø¯Ú©Ú¾Ø§Ø¤" / "Ø´ÛØ± Ø¯Ú©Ú¾Ø§Ø¤"<br>
                    â€¢ "Ø±Ú© Ø¬Ø§Ø¤"
                </small>
            </div>
            
            <!-- Video Recording -->
            <div class="section">
                <h3>ğŸ¥ ÙˆÛŒÚˆÛŒÙˆ</h3>
                <button id="recordBtn" onclick="toggleRecording()">Ø±ÛŒÚ©Ø§Ø±ÚˆÙ†Ú¯ Ø´Ø±ÙˆØ¹ ğŸ”´</button>
            </div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Three.js Setup (Lightweight for 4GB RAM)
        let scene, camera, renderer, characters = [];
        let currentBg = 'school';
        let isVoiceActive = false;
        let isRecording = false;
        let animationFrame = 0;
        
        function init() {
            // Scene
            scene = new THREE.Scene();
            scene.fog = new THREE.Fog(0x87ceeb, 10, 50);
            
            // Camera
            camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 2, 8);
            camera.lookAt(0, 1, 0);
            
            // Renderer (optimized)
            renderer = new THREE.WebGLRenderer({ antialias: false, alpha: true });
            renderer.setSize(window.innerWidth - 320, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1.5)); // Limit for performance
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.BasicShadowMap; // Faster shadows
            document.getElementById('viewport').appendChild(renderer.domElement);
            
            // Lights (minimal for performance)
            const ambLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambLight);
            
            const dirLight = new THREE.DirectionalLight(0xffffff, 0.8);
            dirLight.position.set(5, 10, 5);
            dirLight.castShadow = true;
            dirLight.shadow.mapSize.width = 512; // Low res for performance
            dirLight.shadow.mapSize.height = 512;
            scene.add(dirLight);
            
            // Ground
            const groundGeo = new THREE.PlaneGeometry(30, 30);
            const groundMat = new THREE.MeshLambertMaterial({ color: 0x90ee90 });
            const ground = new THREE.Mesh(groundGeo, groundMat);
            ground.rotation.x = -Math.PI / 2;
            ground.receiveShadow = true;
            scene.add(ground);
            
            // Initial background
            changeBackground('school');
            
            // Window resize
            window.addEventListener('resize', onWindowResize);
            
            // Start animation
            animate();
            
            console.log('âœ… 3D Studio initialized successfully!');
        }
        
        // Create Simple Anime Character (Optimized)
        function createAnimeCharacter(x = 0) {
            const char = new THREE.Group();
            
            // Head (sphere)
            const headGeo = new THREE.SphereGeometry(0.5, 16, 16); // Low poly
            const headMat = new THREE.MeshLambertMaterial({ color: 0xffdbac });
            const head = new THREE.Mesh(headGeo, headMat);
            head.position.y = 1.8;
            head.castShadow = true;
            char.add(head);
            
            // Eyes (simple spheres)
            const eyeGeo = new THREE.SphereGeometry(0.12, 8, 8);
            const eyeMat = new THREE.MeshBasicMaterial({ color: 0x4169e1 });
            
            const leftEye = new THREE.Mesh(eyeGeo, eyeMat);
            leftEye.position.set(-0.2, 1.85, 0.4);
            char.add(leftEye);
            
            const rightEye = new THREE.Mesh(eyeGeo, eyeMat);
            rightEye.position.set(0.2, 1.85, 0.4);
            char.add(rightEye);
            
            // Hair (simple box)
            const hairGeo = new THREE.BoxGeometry(0.8, 0.5, 0.8);
            const hairMat = new THREE.MeshLambertMaterial({ color: 0xff1493 });
            const hair = new THREE.Mesh(hairGeo, hairMat);
            hair.position.y = 2.2;
            char.add(hair);
            
            // Body (cylinder)
            const bodyGeo = new THREE.CylinderGeometry(0.3, 0.4, 1.2, 8);
            const bodyMat = new THREE.MeshLambertMaterial({ color: 0x9370db });
            const body = new THREE.Mesh(bodyGeo, bodyMat);
            body.position.y = 0.9;
            body.castShadow = true;
            char.add(body);
            
            // Arms (simple cylinders)
            const armGeo = new THREE.CylinderGeometry(0.08, 0.08, 0.8, 6);
            const armMat = new THREE.MeshLambertMaterial({ color: 0xffdbac });
            
            const leftArm = new THREE.Mesh(armGeo, armMat);
            leftArm.position.set(-0.45, 1.1, 0);
            leftArm.rotation.z = 0.3;
            char.add(leftArm);
            
            const rightArm = new THREE.Mesh(armGeo, armMat);
            rightArm.position.set(0.45, 1.1, 0);
            rightArm.rotation.z = -0.3;
            char.add(rightArm);
            
            // Legs (cylinders)
            const legGeo = new THREE.CylinderGeometry(0.1, 0.1, 1, 6);
            const legMat = new THREE.MeshLambertMaterial({ color: 0x333333 });
            
            const leftLeg = new THREE.Mesh(legGeo, legMat);
            leftLeg.position.set(-0.2, 0.2, 0);
            char.add(leftLeg);
            
            const rightLeg = new THREE.Mesh(legGeo, legMat);
            rightLeg.position.set(0.2, 0.2, 0);
            char.add(rightLeg);
            
            // Position character
            char.position.x = x;
            
            // Store references for animation
            char.userData = {
                head, hair, leftArm, rightArm, leftEye, rightEye, body,
                animation: 'idle',
                animTime: 0
            };
            
            scene.add(char);
            characters.push(char);
            
            updateCharCount();
            return char;
        }
        
        function addAnimeCharacter() {
            if (characters.length >= 4) {
                alert('âš ï¸ Ø²ÛŒØ§Ø¯Û Ø³Û’ Ø²ÛŒØ§Ø¯Û 4 Ú©Ø±Ø¯Ø§Ø±!');
                return;
            }
            const x = (characters.length - 1.5) * 2;
            createAnimeCharacter(x);
            console.log('âœ… Ù†ÛŒØ§ Ú©Ø±Ø¯Ø§Ø± Ø´Ø§Ù…Ù„ Ú©ÛŒØ§ Ú¯ÛŒØ§');
        }
        
        function removeCharacter() {
            if (characters.length === 0) return;
            const char = characters.pop();
            scene.remove(char);
            updateCharCount();
        }
        
        function updateCharCount() {
            document.getElementById('charCount').textContent = characters.length;
            updateStats();
        }
        
        // Color Changes
        function changeHairColor(color) {
            characters.forEach(char => {
                char.userData.hair.material.color.setStyle(color);
            });
        }
        
        function changeEyeColor(color) {
            characters.forEach(char => {
                char.userData.leftEye.material.color.setStyle(color);
                char.userData.rightEye.material.color.setStyle(color);
            });
        }
        
        function changeClothColor(color) {
            characters.forEach(char => {
                char.userData.body.material.color.setStyle(color);
            });
        }
        
        // Animations (Simple)
        function playAnimation(type) {
            characters.forEach(char => {
                char.userData.animation = type;
                char.userData.animTime = 0;
            });
            console.log(`â–¶ï¸ Ø­Ø±Ú©Øª: ${type}`);
        }
        
        function stopAnimation() {
            characters.forEach(char => {
                char.userData.animation = 'idle';
            });
        }
        
        // Background Change
        function changeBackground(type) {
            currentBg = type;
            let color, fogColor;
            
            switch(type) {
                case 'school':
                    color = 0xffe4b5;
                    fogColor = 0x87ceeb;
                    break;
                case 'city':
                    color = 0x708090;
                    fogColor = 0x404040;
                    break;
                case 'home':
                    color = 0xfaf0e6;
                    fogColor = 0xf5deb3;
                    break;
                case 'park':
                    color = 0x7cfc00;
                    fogColor = 0x90ee90;
                    break;
            }
            
            scene.background = new THREE.Color(color);
            scene.fog.color.setHex(fogColor);
            console.log(`ğŸï¸ Ù¾Ø³ Ù…Ù†Ø¸Ø±: ${type}`);
        }
        
        // Animation Loop
        function animate() {
            requestAnimationFrame(animate);
            
            animationFrame++;
            
            // Animate characters
            characters.forEach((char, i) => {
                const data = char.userData;
                data.animTime += 0.05;
                
                switch(data.animation) {
                    case 'wave':
                        data.rightArm.rotation.z = -0.3 + Math.sin(data.animTime * 5) * 0.5;
                        break;
                    case 'jump':
                        char.position.y = Math.abs(Math.sin(data.animTime * 3)) * 0.5;
                        break;
                    case 'walk':
                        char.position.z = Math.sin(data.animTime) * 2;
                        data.leftArm.rotation.x = Math.sin(data.animTime * 2) * 0.5;
                        data.rightArm.rotation.x = -Math.sin(data.animTime * 2) * 0.5;
                        break;
                    case 'dance':
                        data.head.rotation.z = Math.sin(data.animTime * 2) * 0.2;
                        data.leftArm.rotation.z = 0.3 + Math.sin(data.animTime * 3) * 0.5;
                        data.rightArm.rotation.z = -0.3 - Math.sin(data.animTime * 3) * 0.5;
                        char.position.y = Math.abs(Math.sin(data.animTime * 4)) * 0.2;
                        break;
                    case 'idle':
                        // Gentle breathing
                        data.body.scale.y = 1 + Math.sin(data.animTime * 2) * 0.02;
                        break;
                }
            });
            
            renderer.render(scene, camera);
        }
        
        function onWindowResize() {
            camera.aspect = (window.innerWidth - 320) / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth - 320, window.innerHeight);
        }
        
        // Voice Control (Simple)
        function toggleVoiceControl() {
            isVoiceActive = !isVoiceActive;
            const btn = document.getElementById('voiceBtn');
            const status = document.getElementById('voiceStatus');
            
            if (isVoiceActive) {
                btn.textContent = 'Ø¢ÙˆØ§Ø² Ø¨Ù†Ø¯ Ú©Ø±ÛŒÚº ğŸ›‘';
                btn.style.background = '#ef4444';
                status.style.display = 'block';
                startVoiceRecognition();
            } else {
                btn.textContent = 'Ø¢ÙˆØ§Ø² Ø´Ø±ÙˆØ¹ Ú©Ø±ÛŒÚº ğŸ¤';
                btn.style.background = '';
                status.style.display = 'none';
                if (recognition) {
                    recognition.stop();
                }
            }
        }
        
        let recognition = null;
        
        function startVoiceRecognition() {
            if (!('webkitSpeechRecognition' in window)) {
                alert('âš ï¸ Ø¢ÙˆØ§Ø² Ú©ÛŒ Ø´Ù†Ø§Ø®Øª Ø¢Ù¾ Ú©Û’ Ø¨Ø±Ø§Ø¤Ø²Ø± Ù…ÛŒÚº Ø¯Ø³ØªÛŒØ§Ø¨ Ù†ÛÛŒÚºÛ” Chrome Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚºÛ”');
                return;
            }
            
            recognition = new webkitSpeechRecognition();
            recognition.lang = 'ur-PK';
            recognition.continuous = true;
            recognition.interimResults = false;
            
            recognition.onstart = () => {
                console.log('âœ… Ø¢ÙˆØ§Ø² Ú©ÛŒ Ø´Ù†Ø§Ø®Øª Ø´Ø±ÙˆØ¹ ÛÙˆÚ¯Ø¦ÛŒ');
            };
            
            recognition.onresult = (event) => {
                const text = event.results[event.results.length - 1][0].transcript;
                console.log('ğŸ¤ Ø¢Ù¾ Ù†Û’ Ú©ÛØ§:', text);
                
                // Show what was heard
                const status = document.getElementById('voiceStatus');
                status.textContent = `ğŸ¤ Ø³Ù†Ø§: "${text}"`;
                
                // Execute command
                handleVoiceCommand(text);
                
                // Hide status after 2 seconds
                setTimeout(() => {
                    if (isVoiceActive) {
                        status.textContent = 'ğŸ¤ Ø¢ÙˆØ§Ø² Ø³Ù† Ø±ÛØ§ ÛÙˆÚº...';
                    }
                }, 2000);
            };
            
            recognition.onerror = (event) => {
                console.error('âŒ Voice error:', event.error);
                if (event.error === 'no-speech') {
                    console.log('Ú©ÙˆØ¦ÛŒ Ø¢ÙˆØ§Ø² Ù†ÛÛŒÚº Ù…Ù„ÛŒØŒ Ø¯ÙˆØ¨Ø§Ø±Û Ú©ÙˆØ´Ø´...');
                }
            };
            
            recognition.onend = () => {
                // Auto-restart if still active
                if (isVoiceActive) {
                    setTimeout(() => recognition.start(), 100);
                }
            };
            
            recognition.start();
        }
        
        function handleVoiceCommand(text) {
            const cmd = text.toLowerCase();
            
            // Character creation
            if (cmd.includes('Ù†ÛŒØ§') && cmd.includes('Ú©Ø±Ø¯Ø§Ø±') || 
                cmd.includes('character') || cmd.includes('Ø¨Ù†Ø§')) {
                addAnimeCharacter();
                speak('Ù†ÛŒØ§ Ú©Ø±Ø¯Ø§Ø± Ø¨Ù†Ø§ÛŒØ§ Ú¯ÛŒØ§');
            }
            // Remove character
            else if (cmd.includes('ÛÙ¹Ø§') || cmd.includes('Ú©Ù…') || cmd.includes('remove')) {
                removeCharacter();
                speak('Ú©Ø±Ø¯Ø§Ø± ÛÙ¹Ø§ÛŒØ§ Ú¯ÛŒØ§');
            }
            // Dance
            else if (cmd.includes('ÚˆØ§Ù†Ø³') || cmd.includes('dance') || cmd.includes('Ù†Ø§Ú†')) {
                playAnimation('dance');
                speak('ÚˆØ§Ù†Ø³ Ø´Ø±ÙˆØ¹');
            }
            // Walk
            else if (cmd.includes('Ú†Ù„') || cmd.includes('walk') || cmd.includes('Ù‚Ø¯Ù…')) {
                playAnimation('walk');
                speak('Ú†Ù„ Ø±ÛÛ’ ÛÛŒÚº');
            }
            // Jump
            else if (cmd.includes('Ú©ÙˆØ¯') || cmd.includes('jump') || cmd.includes('Ø§Ú†Ú¾Ù„')) {
                playAnimation('jump');
                speak('Ú©ÙˆØ¯ Ø±ÛÛ’ ÛÛŒÚº');
            }
            // Wave
            else if (cmd.includes('ÛØ§ØªÚ¾') || cmd.includes('wave') || cmd.includes('ÛÙ„Ø§')) {
                playAnimation('wave');
                speak('ÛØ§ØªÚ¾ ÛÙ„Ø§ Ø±ÛÛ’ ÛÛŒÚº');
            }
            // Stop
            else if (cmd.includes('Ø±Ú©') || cmd.includes('stop') || cmd.includes('Ø¨Ù†Ø¯')) {
                stopAnimation();
                speak('Ø±Ú© Ú¯Ø¦Û’');
            }
            // Background changes
            else if (cmd.includes('Ø§Ø³Ú©ÙˆÙ„') || cmd.includes('school')) {
                changeBackground('school');
                speak('Ø§Ø³Ú©ÙˆÙ„ Ú©Ø§ Ù…Ù†Ø¸Ø±');
            }
            else if (cmd.includes('Ø´ÛØ±') || cmd.includes('city')) {
                changeBackground('city');
                speak('Ø´ÛØ± Ú©Ø§ Ù…Ù†Ø¸Ø±');
            }
            else if (cmd.includes('Ú¯Ú¾Ø±') || cmd.includes('home')) {
                changeBackground('home');
                speak('Ú¯Ú¾Ø± Ú©Ø§ Ù…Ù†Ø¸Ø±');
            }
            else if (cmd.includes('Ù¾Ø§Ø±Ú©') || cmd.includes('park')) {
                changeBackground('park');
                speak('Ù¾Ø§Ø±Ú© Ú©Ø§ Ù…Ù†Ø¸Ø±');
            }
            // Color changes
            else if (cmd.includes('Ø³Ø±Ø®') || cmd.includes('red') || cmd.includes('Ù„Ø§Ù„')) {
                document.getElementById('hairColor').value = '#ff0000';
                changeHairColor('#ff0000');
                speak('Ø³Ø±Ø® Ø±Ù†Ú¯');
            }
            else if (cmd.includes('Ù†ÛŒÙ„Ø§') || cmd.includes('blue')) {
                document.getElementById('hairColor').value = '#0000ff';
                changeHairColor('#0000ff');
                speak('Ù†ÛŒÙ„Ø§ Ø±Ù†Ú¯');
            }
            else if (cmd.includes('Ú¯Ù„Ø§Ø¨ÛŒ') || cmd.includes('pink')) {
                document.getElementById('hairColor').value = '#ff69b4';
                changeHairColor('#ff69b4');
                speak('Ú¯Ù„Ø§Ø¨ÛŒ Ø±Ù†Ú¯');
            }
            else {
                console.log('âš ï¸ Ú©Ù…Ø§Ù†Úˆ Ø³Ù…Ø¬Ú¾ Ù†ÛÛŒÚº Ø¢Ø¦ÛŒ:', text);
            }
        }
        
        // Text-to-Speech Response
        function speak(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'ur-PK';
                utterance.rate = 1.0;
                window.speechSynthesis.speak(utterance);
            }
        }
        
        // Video Recording
        function toggleRecording() {
            isRecording = !isRecording;
            const btn = document.getElementById('recordBtn');
            const status = document.getElementById('voiceStatus');
            
            if (isRecording) {
                btn.textContent = 'Ø±ÛŒÚ©Ø§Ø±ÚˆÙ†Ú¯ Ø¨Ù†Ø¯ Ú©Ø±ÛŒÚº â¹ï¸';
                btn.classList.add('recording');
                status.textContent = 'ğŸ”´ Ø±ÛŒÚ©Ø§Ø±Úˆ ÛÙˆ Ø±ÛØ§ ÛÛ’...';
                status.classList.add('recording');
                status.style.display = 'block';
                console.log('ğŸ¥ Ø±ÛŒÚ©Ø§Ø±ÚˆÙ†Ú¯ Ø´Ø±ÙˆØ¹');
            } else {
                btn.textContent = 'Ø±ÛŒÚ©Ø§Ø±ÚˆÙ†Ú¯ Ø´Ø±ÙˆØ¹ ğŸ”´';
                btn.classList.remove('recording');
                status.style.display = 'none';
                console.log('â¹ï¸ Ø±ÛŒÚ©Ø§Ø±ÚˆÙ†Ú¯ Ø¨Ù†Ø¯');
            }
        }
        
        // Stats
        function updateStats() {
            document.getElementById('stats').textContent = 
                `FPS: ${Math.round(1000 / 16)} | Models: ${characters.length}`;
        }
        
        setInterval(updateStats, 1000);
        
        // Initialize
        init();
        console.log('âœ… Ø§ÛŒÙ†ÛŒÙ…ÛŒ ØªÚ¾Ø±ÛŒ ÚˆÛŒ Ø§Ø³Ù¹ÙˆÚˆÛŒÙˆ ØªÛŒØ§Ø± ÛÛ’!');
    </script>
</body>
</html>
